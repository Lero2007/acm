<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø¯ÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ğŸŒ¸</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      direction: rtl; 
      text-align: center; 
      background:#ffe6f0; /* Ø¨ÙŠÙ†Ùƒ ÙØ§ØªØ­ */
      overflow-x: hidden;
    }
    h1 { color: #d63384; }
    .account { 
      margin: 10px auto; 
      padding: 10px; 
      border: 1px solid #f3c2d4; 
      border-radius: 10px; 
      width: 60%; 
      background: white;
      box-shadow: 0 0 10px rgba(214, 51, 132, 0.2);
    }
    .done { background-color: #f8d7e8; }
    button {
      padding: 5px 10px;
      margin: 2px;
      border: none;
      border-radius: 5px;
      background: #ff69b4;
      color: white;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover { background: #d63384; }
    .timer { font-size: 0.9em; color: #555; }
    .flower {
      position: fixed;
      top: -50px;
      font-size: 24px;
      animation: fall 6s linear infinite;
    }
    @keyframes fall {
      0% { transform: translateY(-50px) rotate(0deg); opacity:1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity:0; }
    }
  </style>
</head>
<body>
  <h1>ğŸ“‹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ğŸŒ¸</h1>
  <div id="accounts"></div>
  <p id="status"></p>
  <button onclick="resetAllConfirm()">â™»ï¸ Ø±ÙŠØ³ÙŠØª Ø§Ù„ÙƒÙ„</button>
  <button onclick="openNote()">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>

  <script>
    const fs = require('fs');
    const { exec } = require('child_process');

    let accounts = [];
    let progress = JSON.parse(localStorage.getItem("progress")) || [];

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ù† Ù…Ù„Ù note.txt
    function loadAccounts(){
      if (fs.existsSync("note.txt")) {
        const text = fs.readFileSync("note.txt", "utf8");
        accounts = text.split("\n")
          .map(line => line.trim())
          .filter(Boolean)
          .map(line => {
            const [user, pass] = line.split("|").map(s => s.trim());
            return {user, pass};
          });
        if(progress.length !== accounts.length){
          progress = accounts.map(() => ({done:false, time:null}));
        }
        render();
      } else {
        document.getElementById("accounts").innerText = "âŒ Ø§Ù„Ù…Ù„Ù note.txt Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯";
      }
    }

    function render() {
      const container = document.getElementById("accounts");
      container.innerHTML = "";
      let allDone = true;

      accounts.forEach((acc, i) => {
        const div = document.createElement("div");
        div.className = "account " + (progress[i]?.done ? "done" : "");
        
        let timerText = "";
        if (progress[i]?.done && progress[i].time) {
          const diff = Math.floor((Date.now() - progress[i].time) / 1000);
          const mins = Math.floor(diff/60);
          const hrs = Math.floor(mins/60);
          const days = Math.floor(hrs/24);
          if (days > 0) timerText = `Ù…Ù†Ø° ${days} ÙŠÙˆÙ…`;
          else if (hrs > 0) timerText = `Ù…Ù†Ø° ${hrs} Ø³Ø§Ø¹Ø©`;
          else if (mins > 0) timerText = `Ù…Ù†Ø° ${mins} Ø¯Ù‚ÙŠÙ‚Ø©`;
          else timerText = `Ù…Ù†Ø° ${diff} Ø«Ø§Ù†ÙŠØ©`;
        }

        div.innerHTML = `
          <strong>${i+1}.</strong> 
          ğŸ‘¤ ${acc.user} | ğŸ”‘ ${acc.pass} 
          ${progress[i]?.done ? 
            `âœ… <span class="timer">(${timerText})</span> <button onclick="resetOneConfirm(${i})">Ø¥Ø¹Ø§Ø¯Ø©</button>` : 
            `<button onclick="markDone(${i})">ØªÙ…</button>`}
        `;
        container.appendChild(div);
        if (!progress[i]?.done) allDone = false;
      });

      document.getElementById("status").innerText = 
        allDone ? "ğŸ‰ ÙƒÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø®Ù„ØµØª! ğŸŒ¸" : "Ø£ÙƒÙ…Ù„ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ğŸ‘‡";
    }

    function markDone(i) {
      progress[i] = {done:true, time:Date.now()};
      saveProgress();
      render();
    }

    function resetOneConfirm(i) {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¹Ù…Ù„ Ø±ÙŠØ³ÙŠØª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙ‚Ø·ØŸ")) {
        progress[i] = {done:false, time:null};
        saveProgress();
        render();
      }
    }

    function resetAllConfirm() {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¹Ù…Ù„ Ø±ÙŠØ³ÙŠØª Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§ØªØŸ")) {
        progress = accounts.map(() => ({done:false, time:null}));
        saveProgress();
        render();
      }
    }

    function saveProgress() {
      localStorage.setItem("progress", JSON.stringify(progress));
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§ÙŠÙ…Ø± ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
    setInterval(render, 10000);

    // ğŸŒ¸ Ø²Ù‡ÙˆØ± Ù…ØªØ·Ø§ÙŠØ±Ø©
    function createFlower() {
      const flower = document.createElement("div");
      flower.className = "flower";
      flower.innerText = "ğŸŒ¸";
      flower.style.left = Math.random() * window.innerWidth + "px";
      flower.style.animationDuration = (4 + Math.random()*4) + "s";
      document.body.appendChild(flower);
      setTimeout(()=> flower.remove(), 7000);
    }
    setInterval(createFlower, 1500);

    // Ø²Ø± ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª + ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    function openNote(){
      if (fs.existsSync("note.txt")) {
        exec("notepad note.txt");
        // âœ… ØªØ­Ø¯ÙŠØ« Ø¨Ø¹Ø¯ 2 Ø«Ø§Ù†ÙŠØ© Ù…Ù† ÙØªØ­ Ø§Ù„Ù…Ù„Ù (Ø¹Ø´Ø§Ù† Ù„Ùˆ ØªØ¹Ø¯Ù„ ÙˆØªØ­ÙØ¸)
        setTimeout(loadAccounts, 2000);
      } else {
        if (confirm("âŒ Ø§Ù„Ù…Ù„Ù note.txt Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯. Ù‡Ù„ ØªØ­Ø¨ Ø£Ø³ÙˆÙŠÙ„Ùƒ ÙˆØ§Ø­Ø¯ Ø¬Ø¯ÙŠØ¯ØŸ")) {
          fs.writeFileSync("note.txt", "");
          exec("notepad note.txt");
          setTimeout(loadAccounts, 2000);
        }
      }
    }

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ù„Ù Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±: Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ ÙŠØ­ÙØ¸ â†’ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ
    if (fs.existsSync("note.txt")) {
      fs.watch("note.txt", () => {
        loadAccounts();
      });
    }

    // ØªØ­Ù…ÙŠÙ„ Ø£ÙˆÙ„ÙŠ
    loadAccounts();
  </script>
</body>
</html>
